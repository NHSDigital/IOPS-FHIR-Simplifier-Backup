## {{page-title}}

Please refer to Using ITK3 to support GP Connect Messaging for an overview of the use of ITK3 in this context.

Requirements are given below which define how the ITK3 Message Header is populated in all instances of messages generated by sending organisations for this use case:

<table class="requirement-box">
    <tbody><tr>
      <td id="GPCM-SD-OC-141">GPCM-SD-OC-141</td>
      <td>when sending to the primary recipient (the care provider expected to action the message) the <code>RecipientType</code> <strong>MUST</strong> be set to fixed value of <code>FA</code> ('For action') taken from FHIR ValueSet <a href="https://fhir.nhs.uk/STU3/CodeSystem/ITK-RecipientType-1">ITK-RecipientType-1</a> <br>  <br>The meaning of <code>RecipientType</code> is applied in a common way across all ITK3 messaging.  "For action" in this case indicates that the recipient is expected to take  action. <br><br>This item is found in the <code>ITKMessageHandling</code> extension within the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2">ITK3 Message Header</a>.</td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-142">GPCM-SD-OC-142</td>
      <td>when sending a copy message to the patient's registered GP practice the <code>RecipientType</code> <strong>MUST</strong> be set to fixed value of <code>FI</code> ('For information') taken from FHIR ValueSet <a href="https://fhir.nhs.uk/STU3/CodeSystem/ITK-RecipientType-1">ITK-RecipientType-1</a> <br>  <br>"For information" in this case indicates that the recipient is not expected to take action but should attach the payload contents to the patient record.<br><br>This item is found in the <code>ITKMessageHandling</code> extension within the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2">ITK3 Message Header</a>.</td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-143">GPCM-SD-OC-143</td>
      <td><code>BusAckRequested</code> <strong>MUST</strong> be set to fixed value of <code>true</code>. This will request an ITK3 Response with a response code in the range 30001 to 30003.<br><br>This item is found in the <code>ITKMessageHandling</code> extension within the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2">ITK3 Message Header</a></td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-144">GPCM-SD-OC-144</td>
      <td><code>InfAckRequested</code> <strong>MUST</strong> be set to fixed value of <code>true</code>. This will request an ITK3 Response with a response code in the range 10001 to 20013.<br><br>This item is found in the <code>ITKMessageHandling</code> extension within the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2">ITK3 Message Header</a></td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-145">GPCM-SD-OC-145</td>
      <td><code>SenderReference</code> <strong>MUST</strong> be set to the unique identifier of the encounter which has taken place at the sender organisation.<br><br>This item is found in the <code>ITKMessageHandling</code> extension within the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2">ITK3 Message Header</a></td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-146">GPCM-SD-OC-146</td>
      <td><code>MessageDefinition</code> <strong>MUST</strong> be set to fixed value of <code>https://fhir.nhs.uk/STU3/MessageDefinition/ITK-GPConnectSendDocument-MessageDefinition-1</code><br><br>This item is found in the <code>ITKMessageHandling</code> extension within the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2">ITK3 Message Header</a></td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-147">GPCM-SD-OC-147</td>
      <td><code>LocalExtension</code> <strong>MUST</strong> be set to fixed value of <code>SendDocument-OnlineConsultationReport</code><br><br>This item is found in the <code>ITKMessageHandling</code> extension within the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2">ITK3 Message Header</a></td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-148">GPCM-SD-OC-148</td>
      <td><code>Sender</code> <strong>MUST</strong> contain a reference to the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-ITK-Header-Organization-1">CareConnect-ITK-Header-Organization-1</a> resource present in the FHIR message bundle</td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-149">GPCM-SD-OC-149</td>
      <td><code>Source</code> <strong>MUST</strong> contain the MESH mailbox ID of the sender</td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-150">GPCM-SD-OC-150</td>
      <td><code>Event</code> <strong>MUST</strong> contain a fixed value of <code>ITK007C</code> from code system <a href="https://fhir.nhs.uk/STU3/CodeSystem/ITK-MessageEvent-2">ITK-MessageEvent-2</a></td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-151">GPCM-SD-OC-151</td>
      <td><code>Timestamp</code> <strong>MUST</strong> contain the date/time when the message was generated. (A separate process such as the MESH client may be responsible for sending the message at a later date/time.)</td>
    </tr>
  </tbody></table>

---

## ITK3 responses generated

<table class="requirement-box">
    <tbody><tr>
      <td id="GPCM-SD-OC-153">GPCM-SD-OC-153</td>
      <td><code>BusAckRequested</code> <strong>MUST</strong> contain a fixed value of <code>false</code><br><br>This item is found in the <code>ITKMessageHandling</code> extension within the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2">ITK3 Message Header</a></td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-154">GPCM-SD-OC-154</td>
      <td><code>InfAckRequested</code> <strong>MUST</strong> contain a fixed value of <code>false</code><br><br>This item is found in the <code>ITKMessageHandling</code> extension within the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2">ITK3 Message Header</a></td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-155">GPCM-SD-OC-155</td>
      <td><code>SenderReference</code> <strong>MUST</strong> contain the same unique identifier generated by GPCM-SD-042.<br><br>This item is found in the <code>ITKMessageHandling</code> extension within the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2">ITK3 Message Header</a></td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-156">GPCM-SD-OC-156</td>
      <td><code>Sender</code> <strong>MUST</strong> contain a reference to an <a href="https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-ITK-Header-Organization-1">CareConnect-ITK-Header-Organization-1</a> resource present in the FHIR message bundle</td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-157">GPCM-SD-OC-157</td>
      <td><code>Event</code> <strong>MUST</strong> contain a fixed value of <code>ITK008M</code> from code system <a href="https://fhir.nhs.uk/STU3/CodeSystem/ITK-MessageEvent-2">ITK-MessageEvent-2</a></td>
    </tr>
    <tr>
      <td id="GPCM-SD-OC-158">GPCM-SD-OC-158</td>
      <td><code>Timestamp</code> <strong>MUST</strong> contain the date/time when the response was generated.</td>
    </tr>
  </tbody></table>

---