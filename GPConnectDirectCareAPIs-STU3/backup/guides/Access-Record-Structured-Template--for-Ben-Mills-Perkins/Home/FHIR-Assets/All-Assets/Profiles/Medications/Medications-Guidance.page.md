## Medication search criteria ###

There are 2 parameters that can be specified while retrieving medications. A search from date and a boolean that can be set to 'false' in order to exclude medication issues.

As a default, the medication issues are always included in the bundle that is returned. If the consumer specifically wants to retrieve the medication items without any of the issues, then this **MUST** be specified in the request - in this case only the authorisations will be returned. That is, the `MedicationStatement` and `MedicationRequest` with `intent` set to `plan` for each medication item.

Below is a further detail about how the search criteria should be applied:

* Search for all Medications and Medical Devices that were active on or after the specified date
     * The consumer system requests all items from a start date
     * The provider system returns all plans whose effective period end date is null or is on or after the start date
     * Where no date is supplied by the consumer, all medications and medical devices are returned
* Do not include all the prescriptions issued under the returned medication/medical device plans
     * The consumer system requests not to include prescription issues
     * For each of the returned medication/medical device plans, the provider system only includes the authorisations

Technical details relating to the search criteria are available on the [Retrieve a patient's structured record page](accessrecord_structured_development_retrieve_patient_record.html).

## Degraded medications

Where degraded medication records arising from GP2GP record transfer or any other means are present in the patient record, then these **MUST** be coded using the appropriate degrade code (`196421000000109`, Transfer-degraded medication entry) with the original medication name conveyed by `CodeableConcept.text`.

## Medication interoperability

Consumers of medication resources generated by other systems **MUST** consider the clinical safety issues arising from processing medication information recorded in different care settings and contexts, and seek clinical safety guidance where appropriate.

Key concerns are the understandability of received medication information and appropriate actions to degrade and identify medication concepts which are not understood by the receiving system. Appropriate clinical workflows may also be required at the receiver - for example, deactivation of received medications such that they **MUST** be explicitly re-authorised to make them issuable.

Currently dosage and quantity information are expressed in unstructured/textual form. A system intending to consume dosage and quantity information needs to be capable of handling unstructured quantities and dosages.

## Mixtures

In some systems it is possible to prescribe custom formulations compounded from other medications (extemporaneous preparations). Mixtures **MUST** be expressed using the degrade code (`196421000000109`, Transfer-degraded medication entry) with the constituents of the mixture expressed via `CodeableConcept.text`.

## dm+d name versus displayed name

It is possible for historic/legacy medications to be displayed with a name corresponding to the name in the original system’s drug dictionary rather than the dm+d name. This name **SHOULD** be preserved via `CodeableConcept.text` when representing the medication via resources. `CodeableConcept.text` is redundant when the displayed medication name on the original system and the dm+d name is identical, and, in these cases, `CodeableConcept.text` **SHOULD** be omitted.

## Medication reviews

The resources required to describe diarised review activities and reminders for medication reviews are out of scope for this guidance.

## Future-dated prescriptions

Medication issues may be future-dated – for example, repeat dispensed medications or a deferred acute medication that may not be needed if the condition resolves.

## Amendments to the Medication/Medical Device in a plan

All the prescriptions issued under a single medication/medical device plan **MUST** have the same medication/medical device.

Where the medication/medical device (including a Proprietary/Generic switch) of a medication/medical device plan is amended the existing authorisation/plan **MUST** be stopped or discontinued and a new authorisation created.

## Amendments to the Dosage Instructions in a plan

All the prescriptions issues under a single medication/medical device plan **MUST** have the same dosage instruction.

Where the dosage instructions of a medication/medical device plan is amended the existing authorisation/plan **MUST** be stopped or discontinued and a new authorisation created.

To ease the implementation of a single dosage instruction, there will be a period of time made available for the provider systems to fully support this requirement.

*	The requirement applies to all medication/medical device plans that are	created on the provider system after an agreed date (tbd)
*	All medication/medical device plans (regardless of date and status) that contain prescription issues with different dosage instructions **MUST** include the additional information:
    * set `MedicationStatement.Extension(dosagelastchanged)` to the date that the dosage instruction was last changed.
    * add the text "WARNING – Dosage has changed during the effective period. The latest change was made on DD-Mmm-YYYY", where DD-Mmm-YYYY is the date the dosage was last changed.

This will allow consumer systems and end users to identify medication/medical device plans with multiple dosages and take appropriate action.


## Medication discontinuation/stopping

Where a medication is stopped or discontinued then the status of the authorisation **SHOULD** be changed to 'stopped' and a textual stop reason provided via `statusReason.reason`.

A `statusReason` **SHOULD NOT** be generated when an authorisation has simply expired (exceeded review date or number of issues).

## Authorisation

In conjunction with `MedicationStatement`, a `MedicationRequest` with an `intent` of `plan` represents an authorisation for acute, repeat, repeat dispensed medication.

## Re-authorisation

Where a medication is re-authorised a new authorisation **SHOULD** be generated in the form of a `MedicationStatement` and `MedicationRequest` with `intent` of `plan`. Subsequent issues of the medication **SHOULD** reference the new authorisation.